(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f160c34"],{"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,n){var r=a(),c=t-r,u=20,s=0;e="undefined"===typeof e?500:e;var l=function t(){s+=u;var a=Math.easeInOutQuad(s,r,c,e);o(a),s<e?i(t):n&&"function"===typeof n&&n()};l()}},"0ec2":function(t,e,n){"use strict";var i=n("794d"),o=n.n(i);o.a},"3f5e":function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"a",(function(){return s}));var i=n("b775");function o(t){return Object(i["a"])({url:"/files",method:"get",params:t})}function a(t){return Object(i["a"])({url:"/file",method:"post",data:t})}function r(t){return Object(i["a"])({url:"file",method:"get",params:{path:t}})}function c(t){return Object(i["a"])({url:"file",method:"delete",params:{path:t}})}function u(t,e){return Object(i["a"])({url:"file",method:"patch",params:{path:t},data:e})}function s(t,e){return Object(i["a"])({url:"file",method:"post",params:{path:t,dir:e}})}},"46c7":function(t,e,n){t.exports=n.p+"static/img/file.c1cdb1da.svg"},"794d":function(t,e,n){},a444:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",[t.file.name?n("h3",{staticStyle:{"margin-top":"20px"}},[t._v("当前编辑文件: "+t._s(t.file.name))]):t._e(),t._v(" "),n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"自动保存"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},on:{change:t.onAutoSaveChange},model:{value:t.autoSave,callback:function(e){t.autoSave=e},expression:"autoSave"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSave}},[t._v("保存")])],1),t._v(" "),n("div",{staticClass:"editor-container"},[n("markdown-editor",{ref:"editor",attrs:{"preview-style":t.previewStyle,height:"600px"},on:{contentChanged:t.onContentChange}})],1),t._v(" "),n("p",{staticStyle:{"margin-top":"20px"}},[t.lastModifyDate?n("span",{attrs:{id:"saveTime"}},[n("small",[t._v("最后保存时间: "+t._s(t.ft(t.lastModifyDate)))])]):t._e()])],1)],1)],1)},o=[],a=n("16d8"),r=n("3f5e"),c=n("a18c"),u=n("ed08"),s=n("4360"),l={name:"FileEditMarkdown",components:{MarkdownEditor:a["a"]},data:function(){return{file:{},lastModifyDate:void 0,autoSave:"true",ft:function(t){return Object(u["f"])(t)},previewStyle:screen.width>"1024"?"vertical":"tab"}},created:function(){var t=this,e=this.$route.query.path;e?Object(r["e"])(e).then((function(e){t.originalFileContent=e.content,t.file=e,t.$refs.editor.setMarkdown(t.file.content)})).catch((function(){s["a"].dispatch("tagsView/delView",t.$route),c["b"].push("/file/index")})):(s["a"].dispatch("tagsView/delView",this.$route),c["b"].push("/file/index"))},methods:{onContentChange:function(t){if("true"===this.autoSave){this.timer&&clearTimeout(this.timer);var e=this;this.timer=setTimeout((function(){e.doSave(),e.lastModifyDate=new Date}),500)}},doSave:function(){var t=this,e=this.$refs.editor.getMarkdown();Object(r["f"])(this.file.path,{content:e}).then((function(){t.lastModifyDate=new Date})).catch((function(){}))},onAutoSaveChange:function(){"true"===this.autoSave?this.doSave():this.timer&&clearTimeout(this.timer)}}},d=l,f=(n("0ec2"),n("2877")),h=Object(f["a"])(d,i,o,!1,null,null,null);e["default"]=h.exports},abfe:function(t,e,n){t.exports=n.p+"static/img/folder.f4979b25.svg"}}]);