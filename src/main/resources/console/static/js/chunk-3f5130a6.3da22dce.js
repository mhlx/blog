(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f5130a6"],{"0b6b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",[t.file.name?n("h3",{staticStyle:{"margin-top":"20px"}},[t._v("当前编辑文件: "+t._s(t.file.name))]):t._e(),t._v(" "),n("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"自动保存"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},on:{change:t.onAutoSaveChange},model:{value:t.autoSave,callback:function(e){t.autoSave=e},expression:"autoSave"}})],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSave}},[t._v("保存")])],1),t._v(" "),n("codemirror",{attrs:{options:t.cmOptions},on:{input:t.onCmCodeChange,ready:t.onCmChange},model:{value:t.file.content,callback:function(e){t.$set(t.file,"content",e)},expression:"file.content"}}),t._v(" "),n("p",{staticStyle:{"margin-top":"20px"}},[t.lastModifyDate?n("span",{attrs:{id:"saveTime"}},[n("small",[t._v("最后保存时间: "+t._s(t.ft(t.lastModifyDate)))])]):t._e()])],1)],1)],1)},i=[],o=(n("f9d4"),n("8f94")),r=n("3f5e"),c=n("a18c"),u=n("ed08"),s=n("4360"),l={name:"FileEditJson",components:{codemirror:o["codemirror"]},data:function(){return{file:{},cmOptions:{tabSize:4,mode:{name:"javascript",json:!0},lineNumbers:!0,line:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,autoCloseTags:!0},lastModifyDate:void 0,autoSave:"true",ft:function(t){return Object(u["f"])(t)}}},created:function(){var t=this,e=this.$route.query.path;e?Object(r["e"])(e).then((function(e){t.originalFileContent=e.content,t.file=e})).catch((function(){s["a"].dispatch("tagsView/delView",t.$route),c["b"].push("/file/index")})):(s["a"].dispatch("tagsView/delView",this.$route),c["b"].push("/file/index"))},methods:{onCmReady:function(t){t.setSize(null,600)},onCmCodeChange:function(t){if("true"===this.autoSave&&t!==this.originalFileContent){this.timer&&clearTimeout(this.timer);var e=this;this.timer=setTimeout((function(){e.doSave()}),500)}},doSave:function(){var t=this;Object(r["f"])(this.file.path,{content:this.file.content}).then((function(){t.lastModifyDate=new Date})).catch((function(){}))},onAutoSaveChange:function(){"true"===this.autoSave?this.doSave():this.timer&&clearTimeout(this.timer)}}},f=l,d=(n("e556"),n("2877")),h=Object(d["a"])(f,a,i,!1,null,null,null);e["default"]=h.exports},"308a":function(t,e,n){},"3f5e":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"a",(function(){return s}));var a=n("b775");function i(t){return Object(a["a"])({url:"/files",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/file",method:"post",data:t})}function r(t){return Object(a["a"])({url:"file",method:"get",params:{path:t}})}function c(t){return Object(a["a"])({url:"file",method:"delete",params:{path:t}})}function u(t,e){return Object(a["a"])({url:"file",method:"patch",params:{path:t},data:e})}function s(t,e){return Object(a["a"])({url:"file",method:"post",params:{path:t,dir:e}})}},e556:function(t,e,n){"use strict";var a=n("308a"),i=n.n(a);i.a}}]);