<!DOCTYPE html>
<html lang="zh-CN">

<head>
<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="description" content="Heather is a online Markdown Editor">
<meta name="keywords"
	content="Markdown, Heather, Editor, CodeMirror, Github, Open Source">
<link rel="stylesheet"
	th:href="@{/static/bootstrap/css/bootstrap.min.css}">
<link rel="stylesheet"
	th:href="@{/static/codemirror/lib/codemirror.css}">
<link rel="stylesheet"
	th:href="@{/static/codemirror/addon/scroll/simplescrollbars.css}">
<link rel="stylesheet" th:href="@{/static/css/markdown.css}">
<link th:href="@{/static/fontawesome-free/css/all.min.css}"
	rel="stylesheet">
<link rel="stylesheet"
	th:href="@{/static/jquery-file-upload/css/jquery.fileupload.css}"
	th:if="${user != null}">
<style>
* {
	-webkit-overflow-scrolling: touch;
}

.nowrap {
	white-space: nowrap !important;
}

.CodeMirror {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	width: auto;
	height: auto;
	background-color: #f9f9f7;
	font-size: 15px;
	padding-top: 30px;
}

.CodeMirror-scroll {
	padding: 10px;
	box-sizing: border-box;
	overflow-x: hidden !important;
}

.icon {
	margin-top: 5px;
	cursor: pointer;
	font-size: 16px;
	margin-right: 20px;
	margin-bottom: 5px
}

.noclick {
	pointer-events: none
}

#stat {
	position: absolute;
	left: 0;
	bottom: 0;
	width: 100%;
	text-align: right;
	display: none;
	z-index: 99999;
}

.styled-background {
	background-color: #ff7;
}

body {
	background-color: #f9f9f7
}

.wrap {
	-ms-word-break: break-all;
	word-break: break-all;
	/* Non standard for webkit */
	word-break: break-word;
	-webkit-hyphens: auto;
	-moz-hyphens: auto;
	-ms-hyphens: auto;
	hyphens: auto;
}

#toolbar {
	height: 30px;
	position: absolute;
	left: 0;
	width: 100%;
	padding-left: 10px;
	padding-right: 10px;
	overflow-x: auto;
	overflow-y: hidden;
	z-index: 99;
	white-space: nowrap;
}

#wrapper {
	position: absolute;
	top: 0;
	left: 0;
	bottom: 0;
	width: 100%;
	height: auto;
	overflow-x: hidden
}

#in {
	position: absolute;
	top: 0;
	left: 200px;
	bottom: 0;
	width: 50%;
	height: auto;
	overflow-y: hidden;
	display: none;
}

#out {
	position: absolute;
	top: 0;
	right: 0;
	left: calc(50% + 200px);
	bottom: 0;
	overflow: auto;
	padding: 10px;
	width: 50%;
	padding-left: 20px;
	font-size: 16px;
	line-height: 1.5em;
	visibility: hidden;
	scrollbar-color: #bcd transparent;
	scrollbar-width: thin
}

#toc {
	position: absolute;
	top: 0;
	left: 0;
	bottom: 0;
	height: auto;
	overflow: auto;
	padding: 10px;
	width: 200px;
	padding: 10px
}

#toc h1, h2, h3, h4, h5, h6 {
	cursor: pointer;
}

#toc h1 {
	margin: 1rem 0;
	font-size: 15px;
}

#toc h2 {
	margin: .7rem 0;
	margin-left: 30px;
	font-size: 14px;
}

#toc h3 {
	margin: .6rem 0;
	margin-left: 45px;
	font-size: 13px;
}

#toc h4 {
	margin: .5rem 0;
	margin-left: 60px;
	font-size: 12px;
}

#toc h5 {
	margin: .4rem 0;
	margin-left: 75px;
	font-size: 11px;
}

#toc h6 {
	margin: 0.3rem 0;
	margin-left: 90px;
	font-size: 10px;
}

#in .CodeMirror-code {
	height: auto;
	margin-bottom: 301px;
}

#helpModal td {
	white-space: nowrap !important;
}

#out img {
	max-height: 200px;
}

@media ( min-width :768px) {
	::-webkit-scrollbar {
		width: 6px;
	}
	::-webkit-scrollbar-track {
		box-shadow: none;
		border-radius: 3px;
	}
	::-webkit-scrollbar-thumb {
		border-radius: 10px;
		background-color: #bcd;
	}
}

@media ( max-width : 768px) {
	#in {
		left: 100%;
		width: 100%;
		display: block;
		visibility: visible
	}
	#out {
		width: 100%;
		left: 200%;
		visibility: visible;
		overflow-y: auto;
	}
	#toolbar {
		height: 45px;
		width: 100%
	}
	.icon {
		font-size: 30px
	}
	.CodeMirror-scroll {
		margin-top: 10px
	}
	.CodeMirror {
		font-size: 1.5rem;
		padding-top: 40px;
	}
	#stat {
		width: 100%
	}
	#fullscreen-icon {
		display: none
	}
	#toc-icon {
		display: none
	}
	#toc h1 {
		margin: 1rem 0;
		font-size: 1.3rem;
	}
	#toc h2 {
		margin: .7rem 0;
		margin-left: 40px;
		font-size: 1.2rem;
	}
	#toc h3 {
		margin: .6rem 0;
		margin-left: 60px;
		font-size: 1.1em;
	}
	#toc h4 {
		margin: .5rem 0;
		margin-left: 80px;
		font-size: 1em;
	}
	#toc h5 {
		margin: .4rem 0;
		margin-left: 100px;
		font-size: 0.9em;
	}
	#toc h6 {
		margin: 0.3rem 0;
		margin-left: 120px;
		font-size: 0.8em;
	}
	#toc {
		display: block;
		width: 100%;
		overflow-y: auto;
	}
	#eye-icon {
		display: none
	}
}
</style>


</head>

<body>
	<div id="wrapper">
		<div id="toc" class="noprint"></div>
		<div id="in" class="noprint">
			<div id="toolbar" class="noprint">
				<i class="fas fa-book icon" id="toc-icon"></i><i
					class="fas fa-file icon" onclick="files.get()" th:if="${user != null}"></i><i
					class="fas fa-question-circle icon" data-toggle="modal"
					data-target="#helpModal"></i> <i class="far fa-check-square icon"
					onclick="toggleToolbar($(this))" id="toggle-toolbar"></i><i
					class="fas fa-upload icon" id="upload-icon"></i><i
					class="fas fa-download icon" id="download-icon"></i> <i
					class="far fa-window-maximize icon" id="fullscreen-icon"></i><i
					class="fas fa-cog icon" id="cog-icon"></i>
				<div style="float: right; display: none" id="saveTip"></div>
			</div>
			<textarea id="code" style="width: 100%; height: 100%"></textarea>

			<div id="stat" class="noprint"></div>
		</div>
		<div class="markdown-body " id="out"></div>
	</div>



	<div class="noprint">
		<div class="modal fade" id="helpModal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">编辑器说明</h4>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<h3>markdown语法</h3>
						<div class="table-responsive">
							<table class="table">
								<tr>
									<th>格式</th>
									<th>说明</th>
								</tr>
								<tr>
									<td>粗体</td>
									<td>**内容** <br> __内容__
									</td>
								</tr>
								<tr>
									<td>斜体</td>
									<td>*内容* <br> _内容_
									</td>
								</tr>
								<tr>
									<td>链接</td>
									<td>[link text](http://url.com/ "title")<br> [link
										text](http://url.com/)
									</td>
								</tr>
								<tr>
									<td>图片</td>
									<td>![alt text](http://path/to/img.jpg "title")<br>
										![alt text](http://path/to/img.jpg)
									</td>
								</tr>

								<tr>
									<td>标题</td>
									<td># h1<br> ## h2<br> ...
									</td>
								</tr>
								<tr>
									<td>有序列表(无段落)</td>
									<td><pre>1.one
2.two</pre></td>
								</tr>
								<tr>
									<td>无需列表(有段落)</td>
									<td><pre>* A list item.

  With multiple paragraphs.

* bar</pre></td>
								</tr>
								<tr>
									<td>嵌套列表</td>
									<td><pre>* Abacus
  * anser
* Bubbles
  1. bunk
  2. bupkis
     * bar
  3. burper
* Cunning</pre></td>
								</tr>
								<tr>
									<td>引用</td>
									<td>> 内容</td>
								</tr>
								<tr>
									<td>代码</td>
									<td>`内容`<br> `` `内容` ``
									</td>
								</tr>

								<tr>
									<td>代码块</td>
									<td><pre>```
public static void main(String [] args){

}
```</pre></td>
								</tr>
								<tr>
									<td>水平线</td>
									<td>---<br>* * *<br>- - - -
									</td>
								</tr>
								<tr>
									<td>换行(行末两个空格)</td>
									<td><pre>第一行   
第二行</pre></td>
								</tr>
								<tr>
									<td>表格</td>
									<td><pre>| A | B | C | 
| - | :-: | -: | 
| 左对齐 | 居中对齐| 右对齐 | </pre></td>
								</tr>
								<tr>
									<td>锚点</td>
									<td>[内容](#1)</td>
								</tr>
								<tr>
									<td>脚注</td>
									<td><pre>Markdown[^1]
[^1]: 内容</pre></td>
								</tr>
							</table>
						</div>
					</div>
					<div class="modal-footer">
						<button class="btn btn-primary" type="button" data-dismiss="modal">确定</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal" tabindex="-1" role="dialog" id="storage-modal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">本地存储</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body"></div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">关闭</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal" tabindex="-1" role="dialog" id="filesModal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">文件</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body"></div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">关闭</button>
					</div>
				</div>
			</div>
		</div>


		<div class="modal" tabindex="-1" role="dialog" id="uploadModal">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">文件上传</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form id="fileupload" class="form-horizontal" autocomplete="off"
							action="http://upload.qiniu.com" method="POST"
							enctype="multipart/form-data">
							<div class="fileupload-buttonbar">
								<div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
									<input type="text" class="form-control" placeholder="目录路径"
										id="upload-dir" style="margin-bottom: 10px" /> <span
										class="btn btn-success fileinput-button"> <i
										class="glyphicon glyphicon-plus"></i> <span>添加文件</span> <input
										type="file" name="file">
									</span>
									<button type="submit" class="btn btn-primary start">
										<i class="glyphicon glyphicon-upload"></i> <span>文件上传</span>
									</button>
									<button type="reset" class="btn btn-warning cancel">
										<i class="glyphicon glyphicon-ban-circle"></i> <span>取消</span>
									</button>
									<span class="fileupload-process"></span>
								</div>
							</div>
							<div style="margin-top: 10px">
								<div
									class="fileupload-progress fade col-lg-12 col-sm-12 col-md-12 col-xs-12">
									<!-- The global progress bar -->
									<div class="progress progress-striped active"
										role="progressbar" aria-valuemin="0" aria-valuemax="100">
										<div class="progress-bar progress-bar-success"
											style="width: 0%;"></div>
									</div>
								</div>
							</div>
							<div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
								<div class="table-responsive">
									<table role="presentation" class="table table-striped"
										style="text-align: center">
										<tbody class="files"></tbody>
									</table>
								</div>
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">关闭</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
		var rootPath = '[[@{/}]]';
		var root = rootPath;
	</script>
	<script th:src="@{/static/jquery/jquery.min.js}"></script>
	<script th:src="@{/static/js/base.js}"></script>
	<script th:src="@{/static/heather/js/storage.js}"></script>
	<script th:src="@{/static/heather/js/theme.js}"></script>
	<script>
		theme.render();
	</script>
	<script th:src="@{/static/heather/js/htmlparser.js}"></script>
	<script th:src="@{/static/heather/js/morphdom-umd.min.js}"></script>
	<script th:src="@{/static/bootstrap/js/bootstrap.bundle.min.js}"></script>

	<!--CodeMirror-->
	<script th:src="@{/static/codemirror/lib/codemirror.js}"></script>
	<script th:src="@{/static/codemirror/addon/mode/overlay.js}"></script>
	<script th:src="@{/static/codemirror/mode/javascript/javascript.js}"></script>
	<script th:src="@{/static/codemirror/mode/xml/xml.js}"></script>
	<script th:src="@{/static/codemirror/mode/markdown/markdown.js}"></script>
	<script th:src="@{/static/codemirror/mode/gfm/gfm.js}"></script>

	<script th:src="@{/static/codemirror/addon/search/searchcursor.js}"></script>
	<script th:src="@{/static/codemirror/addon/search/search.js}"></script>
	<script th:src="@{/static/codemirror/addon/edit/continuelist.js}"></script>
	<script th:src="@{/static/codemirror/addon/scroll/simplescrollbars.js}"></script>

	<!--Editor-->
	<script th:src="@{/static/sweet2alert/dist/sweetalert2.all.min.js}"></script>
	
	
	<script th:src="@{/static/heather/editor/turndown.js}"></script>
	<script th:src="@{/static/heather/editor/turndown-plugin-gfm.js}"></script>
	
	<script th:src="@{/static/heather/js/jquery.touchwipe.min.js}"></script>
	<script th:src="@{/static/heather/editor/md.js}"></script>
	<script th:src="@{/static/heather/highlight/highlight.pack.js}"></script>
	<script th:src="@{/static/heather/js/editor.js}"></script>
	<script th:src="@{/static/heather/editor/render.js?v=1}"></script>
	<script th:src="@{/static/heather/editor/sync.js}"></script>
	<script th:src="@{/static/heather/editor/searchHelper.js}"></script>
	<script th:src="@{/static/heather/editor/cursorHelper.js}"></script>
	<script th:src="@{/static/heather/editor/emoji.js}"></script>
	<script th:src="@{/static/heather/editor/toolbar.js}"></script>
	<script th:src="@{/static/heather/editor/layout.js}"></script>
	<script th:src="@{/static/heather/js/index.js}"></script>

	<div th:remove="tag" th:if="${user != null}">
		<script type="text/javascript"
			th:src="@{/static/jquery-file-upload/js/load-image.min.js}"></script>
		<script type="text/javascript"
			th:src="@{/static/js/canvas-to-blob.min.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/vendor/jquery.ui.widget.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.iframe-transport.js}"></script>
		<script th:src="@{/static/jquery-file-upload/js/jquery.fileupload.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.fileupload-ui.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.fileupload-process.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.fileupload-image.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.fileupload-audio.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.fileupload-video.js}"></script>
		<script
			th:src="@{/static/jquery-file-upload/js/jquery.fileupload-validate.js}"></script>
		<script th:src="@{/static/js/file.js}"></script>
		<script th:src="@{/static/heather/editor/file.js}"></script>
	</div>
</body>

</html>