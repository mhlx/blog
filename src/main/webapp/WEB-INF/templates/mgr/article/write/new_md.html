<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />
<link rel="stylesheet"
	th:href="@{/static/bootstrap/css/bootstrap.min.css}">
<link rel="stylesheet"
	th:href="@{/static/codemirror/lib/codemirror.css}">
<link rel="stylesheet"
	th:href="@{/static/codemirror/theme/base16-light.css}">
<link rel="stylesheet"
	th:href="@{/static/jquery-file-upload/css/jquery.fileupload.css}">
<link rel="stylesheet"
	th:href="@{/static/codemirror/addon/dialog/dialog.css}">
<link rel="stylesheet"
	th:href="@{/static/codemirror/addon/search/matchesonscrollbar.css}">
<link rel="stylesheet" th:href="@{/static/css/markdown.css}">
<link rel="stylesheet" th:href="@{/static/prettify/github-v2.min.css}">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<style>
#toolbar {
	background-color: #f5f5f5;
	height: 30px;
	position: fixed;
	left: 0;
	width: 50%;
	padding-left: 10px;
	padding-right: 10px;
	overflow: auto;
	overflow-y: hidden;
}

#in {
	position: fixed;
	top: 30px;
	left: 0;
	bottom: 0;
	width: 50%;
	height: auto;
	overflow: auto;
}

#out {
	position: fixed;
	top: 0;
	right: 0;
	left: 50%;
	bottom: 0;
	overflow: auto;
	padding: 10px;
	padding-left: 20px;
	color: #444;
	font-family: Georgia, Palatino, 'Palatino Linotype', Times,
		'Times New Roman', serif;
	font-size: 16px;
	line-height: 1.5em
}

.CodeMirror {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	width: auto;
	height: auto;
}

.CodeMirror-scroll {
	padding: 10px;
	box-sizing: border-box;
	overflow-x: hidden !important;
}

.icon {
	margin-top: 5px;
	cursor: pointer;
	font-size: 16px;
	margin-right: 20px;
	margin-bottom: 5px
}

.modal {
	z-index: 9999999
}

#stat{
	position: fixed;
	left: 0;
	bottom: 0;
	width:50%;
	text-align:right;
	display:none
}
</style>
</head>
<body>
	<div>
			<div id="toolbar">
				<span class="glyphicon glyphicon-save icon" style="color: red"
					title="ä¿å­˜" onclick="showBase()"></span> <span
					class="glyphicon glyphicon-file icon" title="æ–‡ä»¶"
					onclick="openFile()"></span>
				<!-- 					<span class="icon glyphicon" -->
				<!-- 					title="emoji" onclick="emoji.show()">ğŸ˜€</span> -->
				<span class="glyphicon glyphicon-question-sign icon"
					data-toggle="modal" data-target="#helpModal" aria-hidden="true"></span>
			</div>
			<div id="in" style="display: none">
				<textarea id="code" style="width: 100%; height: 100%"
					th:text="${article.content}"></textarea>
			</div>
		<div class="markdown-body" id="out"></div>
		<div id="stat"></div>
	</div>


	<div class="modal fade" id="helpModal" tabindex="-1" role="dialog"
		style="z-index: 9999999">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">ç¼–è¾‘å™¨è¯´æ˜</h4>
				</div>
				<div class="modal-body">
					<h3>åŸºç¡€</h3>
					<ol>
						<li><p>
								æ”¯æŒ<b>å›¾ç‰‡</b>ç²˜è´´ä¸Šä¼ 
							</p></li>
						<li><p>æ”¯æŒæ–‡ä»¶æ‹–æ›³ä¸Šä¼ </p></li>
						<li><p>æ”¯æŒæ‹–æ›³å¯¼å…¥mdæ–‡ä»¶</p></li>
						<li><p>æ”¯æŒæ‹–æ›³å¯¼å…¥htmlæ–‡ä»¶(è‡ªåŠ¨è½¬åŒ–ä¸ºmarkdown)</p></li>
					</ol>
					<h3>å¿«æ·é”®</h3>
					<div class="table-responsive">
						<table class="table">
							<tr>
								<th>å¿«æ·é”®</th>
								<th>è¯´æ˜</th>
							</tr>
							<tr>
								<td>Ctrl + S</td>
								<td>ä¿å­˜æ–‡ç« </td>
							</tr>
							<tr>
								<td>Alt + F</td>
								<td>å¯»æ‰¾æ–‡æœ¬</td>
							</tr>
							<tr>
								<td>Shift + Ctrl + F</td>
								<td>æ›¿æ¢å•ä¸ªæ–‡æœ¬</td>
							</tr>
							<tr>
								<td>Shift + Ctrl + R</td>
								<td>æ›¿æ¢å…¨éƒ¨æ–‡æœ¬</td>
							</tr>
						</table>
					</div>
					<h3>markdownè¯­æ³•</h3>
					<div class="table-responsive">
						<table class="table">
							<tr>
								<th>æ ¼å¼</th>
								<th>è¯´æ˜</th>
							</tr>
							<tr>
								<td>ç²—ä½“</td>
								<td>**å†…å®¹** <br> __å†…å®¹__
								</td>
							</tr>
							<tr>
								<td>æ–œä½“</td>
								<td>*å†…å®¹* <br> _å†…å®¹_
								</td>
							</tr>
							<tr>
								<td>é“¾æ¥</td>
								<td>[link text](http://url.com/ "title")<br> [link
									text](http://url.com/)
								</td>
							</tr>
							<tr>
								<td>å›¾ç‰‡</td>
								<td>![alt text](http://path/to/img.jpg "title")<br>
									![alt text](http://path/to/img.jpg)
								</td>
							</tr>

							<tr>
								<td>æ ‡é¢˜</td>
								<td># h1<br> ## h2<br> ...
								</td>
							</tr>
							<tr>
								<td>æœ‰åºåˆ—è¡¨(æ— æ®µè½)</td>
								<td><pre>1.one
2.two</pre>
								</td>
							</tr>
							<tr>
								<td>æ— éœ€åˆ—è¡¨(æœ‰æ®µè½)</td>
								<td><pre>* A list item.

  With multiple paragraphs.

* bar</pre>
								</td>
							</tr>
							<tr>
								<td>åµŒå¥—åˆ—è¡¨</td>
								<td><pre>* Abacus
  * anser
* Bubbles
  1. bunk
  2. bupkis
     * bar
  3. burper
* Cunning</pre></td>
							</tr>
							<tr>
								<td>å¼•ç”¨</td>
								<td>> å†…å®¹</td>
							</tr>
							<tr>
								<td>ä»£ç </td>
								<td>`å†…å®¹`<br>
								`` `å†…å®¹` ``
								</td>
							</tr>
							
							<tr>
								<td>ä»£ç å—</td>
								<td><pre>```
public static void main(String [] args){

}
```</pre>
								</td>
							</tr>
							<tr>
								<td>æ°´å¹³çº¿</td>
								<td>---<br>* * *<br>- - - - 
								</td>
							</tr>
							<tr>
								<td>æ¢è¡Œ(è¡Œæœ«ä¸¤ä¸ªç©ºæ ¼)</td>
								<td><pre>ç¬¬ä¸€è¡Œ   
ç¬¬äºŒè¡Œ</pre>
								</td>
							</tr>
							<tr>
								<td>è¡¨æ ¼</td>
								<td><pre>| A | B | C | 
| - | :-: | -: | 
| å·¦å¯¹é½ | å±…ä¸­å¯¹é½| å³å¯¹é½ | </pre>
								</td>
							</tr>
							<tr>
								<td>é”šç‚¹</td>
								<td>[å†…å®¹](#1)
								</td>
							</tr>
							<tr>
								<td>è„šæ³¨</td>
								<td><pre>Markdown[^1]
[^1]: å†…å®¹</pre>
								</td>
							</tr>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary" type="button" data-dismiss="modal">ç¡®å®š</button>
				</div>
			</div>
		</div>
	</div>



	<div class="modal fade" id="baseModal" tabindex="-1" role="dialog"
		style="z-index: 9999999">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">åŸºæœ¬ä¿¡æ¯</h4>
				</div>
				<div class="modal-body">
					<div class="alert alert-danger" id="error-tip"
						style="display: none"></div>
					<form>
						<div class="form-group">
							<label>åšå®¢æ ‡é¢˜</label><input type="text" class="form-control"
								placeholder="åšå®¢æ ‡é¢˜(1-200ä¸ªå­—ç¬¦)" maxlength="200" id="title"
								th:value="${article.title}" />
						</div>
						<div class="form-group">
							<label>åˆ«å</label><input type="text" class="form-control"
								placeholder="åšå®¢åˆ«å(1-200ä¸ªå­—ç¬¦ï¼Œä¸èƒ½ä¸ºçº¯æ•°å­—ä»¥åŠåŒ…å«'<'ã€'>','='å’Œç©ºæ ¼ç­‰å­—ç¬¦)"
								maxlength="200" id="alias" th:value="${article.alias}" />
						</div>
						<div class="form-group">
							<label>æ‘˜è¦ </label> <a href="javascript:void(0)"><span
								onclick="previewSummary($(this))"
								class="glyphicon glyphicon-eye-open icon"></span></a>
							<div id="summary-content"
								style="position: relative; height: 310px">
								<textarea class="form-control" cols="8" rows="8"
									placeholder="(0~2000å­—ç¬¦)" id="summary"
									th:text="${article.summary}"></textarea>
							</div>
							<div id="summary-rendered" class="markdown-body"
								style="display: none; max-height: 300px; overflow-y: auto">

							</div>
						</div>
						<div class="form-group">
							<label>ç‰¹å¾å›¾åƒ</label><input type="text" class="form-control"
								placeholder="ç‰¹å¾å›¾åƒ" maxlength="255" id="featureImage"
								th:value="${article.featureImage}" />
						</div>
						<div class="form-group has-feedback has-clear"
							id="tags-input-container">
							<label>æ ‡ç­¾ </label> <input type="text" id="tags-input"
								class="form-control" placeholder="æ ‡ç­¾(å°äº20ä¸ªå­—ç¬¦)" />
						</div>
						<div id="tags-container" class="well" style="margin-top: 5px"></div>
						<div class="form-group">
							<label>ç©ºé—´</label> <select class="form-control" id="space">
								<option th:each="space : ${spaces}" th:text="${space.name}"
									th:value="${space.id}"></option>
							</select>
						</div>
						<div class="form-group">
							<label>æ¥æº</label> <select class="form-control" id="from">
								<option th:if="${article.from != null}"
									th:value="${article.from.name()}" selected="selected"
									th:text="'å½“å‰:'+${messages.getMessage(article.from.getMessage())}"></option>
								<option value="ORIGINAL">åŸåˆ›</option>
								<option value="COPIED">è½¬è½½</option>
							</select>
						</div>
						<div id="lock_container"></div>
						<div class="form-group">
							<label>çŠ¶æ€</label> <select class="form-control" id="status">
								<option th:if="${article.status != null}"
									th:value="${article.status.name()}"
									th:text="${messages.getMessage(article.status.getMessage())}"></option>
								<option value="DRAFT">è‰ç¨¿</option>
								<option value="PUBLISHED">å‘å¸ƒ</option>
								<option value="SCHEDULED">è®¡åˆ’</option>
							</select>
						</div>
						<div class="form-group"
							th:style="${article.isSchedule() ? '' : 'display: none'}"
							id="scheduleContainer">
							<label>è®¡åˆ’å‘è¡¨æ—¥æœŸ</label> <input type="text" class="form-control"
								id="scheduleDate"
								th:value="${article.isSchedule() ? #dates.format(article.pubDate, 'yyyy-MM-dd HH:mm') : #dates.format(#dates.createNow(),'yyyy-MM-dd HH:mm')}"><br>
						</div>
						<div class="checkbox">
							<label th:if="${article.isPrivate == null || !article.isPrivate}">
								<input type="checkbox" id="private" />ç§äººåšå®¢
							</label> <label th:if="${article.isPrivate != null && article.isPrivate}"><input
								type="checkbox" id="private" checked="checked" />ç§äººåšå®¢ </label>
						</div>
						<div class="form-group">
							<label>åšå®¢ä¼˜å…ˆçº§(ä¼˜å…ˆçº§è¶Šé«˜æ’åè¶Šé å‰)</label> <input type="text"
								class="form-control" placeholder="1~100" maxlength="3"
								id="level" th:value="${article.level}" />
						</div>
						<div class="checkbox">
							<label
								th:if="${article.allowComment == null || !article.allowComment}">
								<input type="checkbox" id="allowComment" />å…è®¸è¯„è®º
							</label> <label
								th:if="${article.allowComment != null && article.allowComment}"><input
								type="checkbox" id="allowComment" checked="checked" />å…è®¸è¯„è®º </label>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary" type="button" id="submit-art">å‘è¡¨æ–‡ç« </button>
				</div>
			</div>
		</div>
	</div>

	<input type="hidden" th:value="${article.status}" id="oldStatus" />
	<input type="hidden" th:value="${article.tagStr}" id="oldTags"
		style="display: none" />
	<input type="hidden" th:value="${article.lockId}" id="oldLock"
		style="display: none" />
	<input type="hidden" th:value="${article.id}" id="id"
		style="display: none" />
	<input type="hidden"
		th:value="${article.space == null ? '' : article.space.id}"
		id="oldSpace" style="display: none" />

	<div th:replace="base/foot_source"></div>
	<script th:src="@{/static/codemirror/lib/codemirror.js}"></script>
	<script th:src="@{/static/codemirror/addon/mode/overlay.js}"></script>
	<script th:src="@{/static/codemirror/mode/javascript/javascript.js}"></script>
	<script th:src="@{/static/codemirror/mode/css/css.js}"></script>
	<script th:src="@{/static/codemirror/mode/xml/xml.js}"></script>
	<script th:src="@{/static/codemirror/mode/htmlmixed/htmlmixed.js}"></script>
	<script th:src="@{/static/codemirror/mode/markdown/markdown.js}"></script>
	<script th:src="@{/static/codemirror/mode/gfm/gfm.js}"></script>
	<script th:src="@{/static/codemirror/addon/dialog/dialog.js}"></script>
	<script th:src="@{/static/codemirror/addon/search/searchcursor.js}"></script>
	<script th:src="@{/static/codemirror/addon/search/search.js}"></script>
	<script
		th:src="@{/static/codemirror/addon/scroll/annotatescrollbar.js}"></script>
	<script
		th:src="@{/static/codemirror/addon/search/matchesonscrollbar.js}"></script>
	<script th:src="@{/static/codemirror/addon/search/jump-to-line.js}"></script>
	<script type="text/javascript"
		th:src="@{/static/jquery-file-upload/js/load-image.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/static/js/canvas-to-blob.min.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/vendor/jquery.ui.widget.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.iframe-transport.js}"></script>
	<script th:src="@{/static/jquery-file-upload/js/jquery.fileupload.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.fileupload-ui.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.fileupload-process.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.fileupload-image.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.fileupload-audio.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.fileupload-video.js}"></script>
	<script
		th:src="@{/static/jquery-file-upload/js/jquery.fileupload-validate.js}"></script>
	<script type="text/javascript" th:src="@{/static/js/mgr/md_file.js}"></script>
	<script type="text/javascript" th:src="@{/static/js/mgr/dirChooser.js}"></script>
	<script type="text/javascript" th:src="@{/static/js/mgr/common.js}"></script>
	<script type="text/javascript" th:src="@{/static/js/mgr/emoji.js}"></script>
	<script th:src="@{/static/js/modal.js}"></script>
	<script th:src="@{/static/markdown/markdown-it.js}"></script>
	<script th:src="@{/static/markdown/markdown-it-footnote.min.js}"></script>
	<script th:src="@{/static/markdown/turndown.js}"></script>
	<script th:src="@{/static/markdown/turndown-plugin-gfm.js}"></script>
	<script th:src="@{/static/js/waitForImages.js}"></script>
	<script th:src="@{/static/prettify/prettify.js}"></script>
	<script th:src="@{/static/js/mgr/article_editor.js}"></script>
	<script th:src="@{/static/js/mgr/article_md.js}"></script>
</body>
</html>